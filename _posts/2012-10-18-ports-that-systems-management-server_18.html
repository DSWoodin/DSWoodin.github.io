---
layout: post
title: |-
  Ports that Systems Management Server 2003 uses to communicate through a
  firewall or through a proxy server
date: '2012-10-18T03:02:00.001-07:00'
author: syswow64
tags:
- technology
- SCCM
- server ports
- Software
modified_time: '2020-01-17T04:20:30.255-08:00'
blogger_id: tag:blogger.com,1999:blog-4452544758446808584.post-2121505557159716366
blogger_orig_url: https://www.syswow64.co.uk/2012/10/ports-that-systems-management-server_18.html
---

<a href="http://support.microsoft.com/kb/826852">http://support.microsoft.com/kb/826852</a><br/><h3 id="tocHeadRef">Port Requirements: SMS site server to Active Directory</h3><br/>SMS 2003 site servers require access to the Active Directory global catalog server in order to do the following:<br/><ul><br/>	<li>Publish site systems to Active Directory</li><br/>	<li>Publish and query for Active Directory site boundaries</li><br/>	<li>Run Active Directory discovery methods</li><br/></ul><br/><div><br/><div></div><br/><div id="MT2"></div><br/><table id="MT3"><br/><tbody><br/><tr><br/><td><b>Service Name</b></td><br/><td><b>UDP</b></td><br/><td><b>TCP</b></td><br/></tr><br/><tr><br/><td>LDAP</td><br/><td>389</td><br/><td>389</td><br/></tr><br/><tr><br/><td>LDAP SSL</td><br/><td>N/A</td><br/><td>636</td><br/></tr><br/><tr><br/><td>RPC Endpoint Mapper</td><br/><td>135</td><br/><td>135</td><br/></tr><br/><tr><br/><td>Global Catalog LDAP</td><br/><td>N/A</td><br/><td>3268</td><br/></tr><br/><tr><br/><td>Global Catalog LDAP SSL</td><br/><td>N/A</td><br/><td>3269</td><br/></tr><br/><tr><br/><td>Kerberos</td><br/><td>88</td><br/><td>88</td><br/></tr><br/></tbody><br/></table><br/></div><br/><h3 id="tocHeadRef">Port requirements: SMS 2003 site server to the child site, to the secondary site, or to the SMS SQL Server</h3><br/><div><br/><div></div><br/><div id="MT4"></div><br/><table id="MT5"><br/><tbody><br/><tr><br/><td>Port 445</td><br/><td>Server Message Block (SMB)</td><br/></tr><br/></tbody><br/></table><br/></div><br/><h3 id="tocHeadRef">Port requirements: SMS 2003 site server to remote SMS SQL Server database. Proxy management points, management point, server locator points, and reporting points to the SMS SQL Server database</h3><br/><div><br/><div></div><br/><div id="MT6"></div><br/><table id="MT7"><br/><tbody><br/><tr><br/><td>Port 1433</td><br/><td>TCP (SMS site server to SQL server)</td><br/></tr><br/></tbody><br/></table><br/></div><br/><b>Note</b> For more information about SQL server ports, see the section “Microsoft SQL Server ports” section.<br/><h3 id="tocHeadRef">Port requirements: SMS 2003 Advanced Client to Active Directory</h3><br/>In an Active Directory environment, the Advanced client makes a Lightweight Directory Access Protocol (LDAP) query to the global catalog server to find a management point that matches the client’s IP address. The following ports are required in Active Directory to allow the client to contact the global catalog server.<br/><div><br/><div></div><br/><div id="MT8"></div><br/><table id="MT9"><br/><tbody><br/><tr><br/><td>Port 389</td><br/><td>UDP (User Datagram Protocol) LDAP Ping</td><br/></tr><br/><tr><br/><td>Port 389</td><br/><td>TCP LDAP</td><br/></tr><br/><tr><br/><td>Port 636</td><br/><td>TCP LDAP (SSL Connection)</td><br/></tr><br/><tr><br/><td>Port 3268</td><br/><td>TCP (explicit connection to Global Catalog)</td><br/></tr><br/><tr><br/><td>Port 3269</td><br/><td>TCP (explicit SSL connection to Global Catalog)</td><br/></tr><br/></tbody><br/></table><br/></div><br/><h3 id="tocHeadRef">Port requirements: SMS 2003 Advanced Client to Management Point or to distribution point</h3><br/><div><br/><div></div><br/><div id="MT10"></div><br/><table id="MT11"><br/><tbody><br/><tr><br/><td>Port 80</td><br/><td>Hypertext Transfer Protocol (HTTP)</td><br/></tr><br/><tr><br/><td>Port 139</td><br/><td>Client sessions (for non BITS-enabled DPs)</td><br/></tr><br/><tr><br/><td>Port 445</td><br/><td>Server Message Block (for non BITS-enabled DPs)</td><br/></tr><br/></tbody><br/></table><br/></div><br/><b>Note</b> When you use a Background Intelligent Transfer Service (BITS)-enabled distribution point through a firewall, only port 80 needs to opened both the management point and BITS-enabled distribution point. All communications will be initiated from the client. If you are only opening port 80, you will need to specify the management point by using the following script:<br/><div><br/><div><br/><pre>dim oSMSClient <br/>set oSMSClient = CreateObject ("Microsoft.SMS.Client") <br/>oSMSClient.SetCurrentManagementPoint "MP NetBIOS name",0  <br/>set oSMSClient=nothing</pre><br/></div><br/></div><br/>Without access to the active directory or WINS in the environment, the advanced client will need an lmhosts file on the client computers. You will need entries for one or more MPs. For example, the following MP has an IP address of <var>10.0.0.1</var>and a site code of <var>AAA</var>: <var>10.0.0.1</var> "MP_<var>AAA</var> x1A" #PRE. For more information about how to write an LMHOSTS file, click the following article number to view the article in the Microsoft Knowledge Base:<br/><div><a href="http://support.microsoft.com/kb/180094">180094</a> How to write an Lmhosts file for domain validation and other name resolution issues</div><br/><h3 id="tocHeadRef">Port requirements: SMS Remote Control System service: Wuser32</h3><br/><div><br/><div></div><br/><div id="MT12"></div><br/><table id="MT13"><br/><tbody><br/><tr><br/><td><b>Application protocol</b></td><br/><td><b>Protocol</b></td><br/><td><b>Ports</b></td><br/></tr><br/><tr><br/><td>SMS Remote Chat</td><br/><td>TCP</td><br/><td>2703</td><br/></tr><br/><tr><br/><td>SMS Remote Chat</td><br/><td>UDP</td><br/><td>2703</td><br/></tr><br/><tr><br/><td>SMS Remote Control (control)</td><br/><td>TCP</td><br/><td>2701</td><br/></tr><br/><tr><br/><td>SMS Remote Control (control)</td><br/><td>UDP</td><br/><td>2701</td><br/></tr><br/><tr><br/><td>SMS Remote Control (data)</td><br/><td>TCP</td><br/><td>2702</td><br/></tr><br/><tr><br/><td>SMS Remote Control (data)</td><br/><td>UDP</td><br/><td>2702</td><br/></tr><br/><tr><br/><td>SMS Remote File Transfer</td><br/><td>TCP</td><br/><td>2704</td><br/></tr><br/><tr><br/><td>SMS Remote File Transfer</td><br/><td>UDP</td><br/><td>2704</td><br/></tr><br/></tbody><br/></table><br/></div><br/><h3 id="tocHeadRef">SMS Remote Control UDP</h3><br/>When you use NetBIOS over TCP/IP for SMS Remote Control, the following ports are used:<br/><div><br/><div></div><br/><div id="MT14"></div><br/><table id="MT15"><br/><tbody><br/><tr><br/><td>Port 137</td><br/><td>Name resolution</td><br/></tr><br/><tr><br/><td>Port 138</td><br/><td>Messaging</td><br/></tr><br/><tr><br/><td>Port 139</td><br/><td>Client sessions</td><br/></tr><br/></tbody><br/></table><br/></div><br/><b>Note</b> When you use NetBIOS over Novell NWLink, you must configure the router to forward type 20 packets. Type 20 packets provide NetBIOS support.<br/><h3 id="tocHeadRef">Microsoft Windows NT UDP</h3><br/>The following list includes the core UDP ports that Windows NT uses, and it also lists their respective functions:<br/><div><br/><div></div><br/><div id="MT16"></div><br/><table id="MT17"><br/><tbody><br/><tr><br/><td>Domain Name System (DNS)</td><br/><td>UDP</td><br/><td>53</td><br/></tr><br/><tr><br/><td>Dynamic Host Configuration Protocol (DHCP)</td><br/><td>UDP</td><br/><td>67</td><br/></tr><br/><tr><br/><td>Remote procedure call (RPC)</td><br/><td>TCP</td><br/><td>135</td><br/></tr><br/><tr><br/><td>Windows Internet Name Service (WINS)</td><br/><td>UDP</td><br/><td>138</td><br/></tr><br/><tr><br/><td>NetBIOS datagrams</td><br/><td>UDP</td><br/><td>138</td><br/></tr><br/><tr><br/><td>NetBIOS datagrams</td><br/><td>TCP</td><br/><td>139</td><br/></tr><br/></tbody><br/></table><br/></div><br/><b>Note</b> The SMS Administrator console must have TCP port 135 open for communication. Otherwise, the console cannot display all the items in the console tree.<br/><h3 id="tocHeadRef">Microsoft SQL Server ports</h3><br/>If you use the TCP/IP Net-Library, enable port 1433 on the firewall. Use the Hosts file or an advanced connection string for host name resolution.<br/><br/>If you use named pipes over TCP/IP, enable port 139 for NetBIOS functions.<br/><br/>Microsoft does not recommend that you enable UDP ports 137 and 138 for NetBIOS name resolution by using B-node broadcasts. Instead, you can use a WINS server or an Lmhosts file for name resolution.<br/><br/>By default, SQL Server uses TCP (not UDP) port 1433 to listen on TCP/IP. To change the port, run SQL Server Setup on the server and then click <strong>Change Network Support</strong>. If SQL Server uses port 1433, the client Net-Library works. If SQL Server uses a custom port number, the client must specify that port in the Data Source Name (DSN).<br/><h3 id="tocHeadRef">SMS RAS Sender</h3><br/>SMS can also use the SMS RAS Sender with Point to Point Tunneling Protocol (PPTP) to send and to receive SMS site, client, and administrative information through a firewall. Under these circumstances, the following port is used:<br/><div><br/><div></div><br/><div id="MT18"></div><br/><table id="MT19"><br/><tbody><br/><tr><br/><td>PPTP</td><br/><td>TCP</td><br/><td>1723</td><br/></tr><br/></tbody><br/></table><br/></div><br/><h3 id="tocHeadRef">Security</h3><br/>To help improve the security of your computer, you can configure your firewall to use Internet Protocol (IP) filters that permit only registered addresses to pass through the firewall.<br/><br/>If you enable specific ports on a proxy server or on a firewall, this may affect the security of your computer. For additional information about security issues, visit the following Microsoft Web site:<br/><div><a href="http://www.microsoft.com/security">http://www.microsoft.com/security</a></div><br/>For more information about how to restrict TCP/IP ports for DCOM, click the following article number to view the article in the Microsoft Knowledge Base:<br/><div><a href="http://support.microsoft.com/kb/300083">300083</a> How to restrict TCP/IP ports on Windows 2000 and Windows XP</div>