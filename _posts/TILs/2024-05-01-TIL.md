---
title : 2024년 4월 회고
subtitle : 혼자서 할 수 있는일
---

2024년 4월은 시간 개념을 잊은 때아닌 눈 소식 만큼이나 어리둥절하고 당황스러웠다.

개인적인 사유로, 직장에서도 사회에서도 매번 '괜찮아요? 호상씨 무슨 일 있어요?' 라는 말을 엄청 자주 들었 던 달이다.

벌써 본론에 도달했다.

그렇다 KPT를 해봐야겠다..


---

1. KEEP
    힘들다고 연차 난사 하지 않은 것
    개인적인 감정으로 업무에 영향이가지 않도록 한 것
    오히려 일 하면서 생각을 떨치고, 일부러 더 업무에 집중한 것 
    취미생활 만든 것 (킥복싱)
    음주가무 *적당히 하는 것
    취준생 이력서 피드백 준 것
    좌절하지 않고 무너지지 않고 오히려 더 멋있는 방법으로 나를 지킨 것
2. Problem
    회사에서 표정관리 하지 못해 다른 이들이 나에 감정에 대한 눈치를 보게 한 것
    생각없이 지출 한 것
    나 자신을 너무 방치 한 것
    나 자신을 아끼지 않는 것
    이제서야 깨닫게 된 것
3. Try
    모든 일에는 내가 우선 일 것
    매일 아침 스스로를 칭찬 할 것


---


1. Master-Slave 잘 알았다면, 하지 않을 실수
DB 서버에 대한 부하를 줄이는 기법으로 DB서버를 두대로 나누고 하나의 디비는 조회성으로, 또 다른 디비는 제어성으로 사용하게 되는데,
(Scale-out Solutions) 모든 연산이 하나의 DB에서 일어난다면 트래픽이 늘어남에 따라 자연스럽게 병목 현상이 발현되는데 이를 피해가기 위해 
저마다의 방법으로 Master-Slave DB간의 정보의 싱크를(Replication) 연결한다.
어느날 Slave DB에서 DELETE문에 서브쿼리로 SELECT를 붙여서 실행 한 케이스를 보았다.
DB safer가 있음에도(Slave,Master 에서 특정 명령어,쿼리 실행을 막아준다) 실행되어 Slave와 Master간의 replication이 깨져버려 DB 작동이 멈추었다.
이 구간에서 Slave 데이터를 Master로 부어버리면 해결 되는 문제지만, Mysql 의 replication은 비동기 방식이라 부어버리는 시간을 기다리지 않는다
-> 복사하여 붙여넣는데, 실시간으로 들어오는 데이터는 복사 대상에 포함되지 않는다.
시간 여유가 있을 때 Replication 해보는 것 도 좋아보임 (DBA가 하려나..?)

2. Eventlistener
사수분이 요즘 흥미로운 기술이라고 알려주셨다.
서버단에서 하나의 로직에서 두개의 액티브가 발생 할 때 트랜잭션 관리적인 측면과 결과를 통제 할 때 사용 할 수 있는 기술이다.
ex) 회원가입 로직에서 성공하면 이메일로 회원가입 성공 이메일을 보내고 종료하는 로직을 수행 할 때 회원가입에 성공하고 만약 이메일을 보내는데 실패한다면 해당 로직의 응답은 Fail이 발생한다.
python의 경우에 async나 jquery에서 사용되는 promis 같은 동기/비동기를 넘어 트랜잭션 자체를 구분하고 퍼사드 패턴을 이용하여 하위 객체의 기능들을 조합하여 사용하면 위의 결과는 사용자 정의 로직에 만족하는 결과를 얻을 수 있다.
-> 신규 기능 (콘적립)에 적용해보자
EventListner으로 학습완료 API를 호출하고 이중 적립 체크 로직을 수행하고 결과값이 Complite라면 실제 콘 적립 API를 이벤트방식으로 호출하여 트랜잭션을 구분하고, 실제 콘 적립 API 성공응답과 관련 없이 정상적으로 종료 시킬 수 있다. 

하루에 이런 카테고리의 글을 작성해보자.

---


END