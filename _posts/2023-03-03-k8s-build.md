---
layout: post
title: k8s build
subtitle: 搭建k8s
cover-img: /assets/img/path.jpg
thumbnail-img: /assets/img/thumb.png
share-img: /assets/img/path.jpg
tags: [books, test]
---

默认安装最新版本的containerd,kubectl,kubeadm,kubelet
关闭服务器swap，升级内核到4.8以上

1. containerd
    - mirror  
      更换私有镜像源
    - cgroup 
      设置systemdCgroup=true,使containerd的用户组和kubelet一致
    - sandbox_image
      设置pause镜像为私有仓库镜像
2. kubeadm
    - pod-network-cidr=110.120.0.0/16 设置cni网络区间，和后面设置的网络addons的区间一致
    - image-repository nexus.gree.com/k8simage 设置镜像源
3. calico
     使用calico 作为网络addons
    - 修改operator的镜像


[edit](https://github.com/wurara/wurara.github.io/new/master/_posts)
