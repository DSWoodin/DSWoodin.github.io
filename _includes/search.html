{% if site.post_search %}

  <input type="text" id="search-input" placeholder="Search">
  <p style="margin: 0.5rem 0"></p>
  <ul id="results-container"></ul>

  <style>
    #search-input {
      width: 25%;
      background-color: #ffffff00;
      border: none;
      text-align: center;
      border-bottom: 1px solid #00000030;
      margin: auto;
      display: block;
      transition: width 1s ease;
      color: {{ site.text-col | default: "#757575" }};
    }
    .page-dark-mode #search-input {
      color: inherit;
      border-bottom: 1px solid #ffffff15;
    }

    #search-input:focus {
      outline: none; /* remove opera's onfocus outline */
      width: 75%;
    }


    #results-container {
      list-style: none;
      padding-left: unset;
    }
  </style>

  <script src="https://unpkg.com/simple-jekyll-search@latest/dest/simple-jekyll-search.min.js"></script>
  <script type="text/javascript">
    var searchjson = '[ \
      {% for post in site.posts %} \
        { \
          "title"    : "{% if post.title != "" %}{{ post.title | escape }}{% else %}{{ post.excerpt | strip_html |  escape | strip }}{%endif%}", \
          "category" : "{{ post.tags | join: \', \' }}", \
          "url"      : "{{ site.baseurl }}{{ post.url }}", \
          "date"     : "{{ post.date | date: "%B %e, %Y" }}" \
        } {% unless forloop.last %},{% endunless %} \
      {% endfor %} \
    ]';
    searchjson = JSON.parse(searchjson);

    var sjs = SimpleJekyllSearch({
      searchInput: document.getElementById('search-input'),
      resultsContainer: document.getElementById('results-container'),
      json: searchjson
    });
  </script>

{% endif %}
