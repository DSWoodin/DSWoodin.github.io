---
layout: post
title: '"Bootmgr is missing" from deployed .wim file'
date: '2012-11-01T03:02:00.001-07:00'
author: syswow64
tags:
- wim image
- technology
- SCCM
- server 2008
- Software
- winpe
- deployment
- task sequence
- Windows 7
modified_time: '2020-01-17T04:20:29.901-08:00'
blogger_id: tag:blogger.com,1999:blog-4452544758446808584.post-1055881160942660774
blogger_orig_url: https://www.syswow64.co.uk/2012/11/is-missing-from-deployed-wim-file_1.html
---

BOOTMGR errors is if your PC is trying to boot from a drive that is not properly configured.  In other words, it’s trying to boot from a <em>non-bootable</em> source.<br/><br/><strong>Cause:</strong><br/><br/>This error occurs when either of the following conditions is true:<br/><ul><br/>	<li>The Windows Boot Manager (Bootmgr) entry is not present in the Boot Configuration Data (BCD) store.</li><br/>	<li>The Boot\BCD file on the active partition is damaged or missing.</li><br/></ul><br/>It is most likely the captured wim image had a corrupt/missing Bootmgr record.<br/><br/>Open WInPE and run the command below.<br/><br/>bcdboot c:\windows /s c:<br/><br/>Now you should recapture the Wim and test a new Task Sequence deployment.<br/><br/>Bootrec.exe /RebuildBcd<br/><br/>&nbsp;<br/><br/><a title="http://support.microsoft.com/kb/927391" href="http://support.microsoft.com/kb/927391" target="_blank">http://support.microsoft.com/kb/927391</a><br/><br/>Here is the content of that article:<br/><h3><strong>Resolution:</strong></h3><br/><h4 id="tocHeadRef">Method 1: Repair the BCD store by using the Startup Repair option</h4><br/>You can use the Startup Repair option in the Windows Recovery Environment to repair the BCD store. To do this, follow these steps:<br/><ol><br/>	<li>Put the Windows Vista installation disc in the disc drive, and then start the computer.</li><br/>	<li>Press a key when you are prompted.</li><br/>	<li>Select a language, a time, a currency, and a keyboard or another input method, and then click <strong>Next</strong>.</li><br/>	<li>Click <strong>Repair your computer</strong>.</li><br/>	<li>Click the operating system that you want to repair, and then click <strong>Next</strong>.</li><br/>	<li>In the <strong>System Recovery Options</strong> dialog box, click <strong>Startup Repair</strong>.</li><br/>	<li>Restart the computer.</li><br/></ol><br/><h4 id="tocHeadRef">Method 2: Rebuild the BCD store by using the Bootrec.exe tool</h4><br/>If the previous method does not resolve the problem, you can rebuild the BCD store by using the Bootrec.exe tool in the Windows Recovery Environment. To do this, follow these steps:<br/><ol><br/>	<li>Put the Windows Vista installation disc in the disc drive, and then start the computer.</li><br/>	<li>Press a key when you are prompted.</li><br/>	<li>Select a language, a time, a currency, and a keyboard or another input method, and then click <strong>Next</strong>.</li><br/>	<li>Click <strong>Repair your computer</strong>.</li><br/>	<li>Click the operating system that you want to repair, and then click <strong>Next</strong>.</li><br/>	<li>In the <strong>System Recovery Options</strong> dialog box, click <strong>Command Prompt</strong>.</li><br/>	<li>Type Bootrec /RebuildBcd, and then press ENTER.<br/><ul><br/>	<li>If the Bootrec.exe tool runs successfully, it presents you with an installation path of a Windows directory. To add the entry to the BCD store, type Yes. A confirmation message appears that indicates the entry was added successfully.</li><br/>	<li>If the Bootrec.exe tool cannot locate any missing Windows installations, you must remove the BCD store, and then you must re-create it. To do this, type the following commands in the order in which they are presented. Press ENTER after each command.<br/><div>Bcdedit /export C:\BCD_Backup</div><br/><div>ren c:\boot\bcd bcd.old</div><br/><div>Bootrec /rebuildbcd</div></li><br/></ul><br/></li><br/>	<li>Restart the computer.</li><br/></ol><br/><h4 id="tocHeadRef">Method 3: Rebuild the BCD store manually by using the Bcdedit.exe tool</h4><br/>If the previous method does not resolve the problem, you can rebuild the BCD store manually by using the Bcdedit.exe tool in the Windows Recovery Environment. To do this, follow these steps:<br/><ol><br/>	<li>Put the Windows Vista installation disc in the disc drive, and then start the computer.</li><br/>	<li>Press a key when you are prompted.</li><br/>	<li>Select a language, a time, a currency, and a keyboard or another input method, and then click <strong>Next</strong>.</li><br/>	<li>Click <strong>Repair your computer</strong>.</li><br/>	<li>Click the operating system that you want to repair, and then click <strong>Next</strong>.</li><br/>	<li>In the <strong>System Recovery Options</strong> dialog box, click <strong>Command Prompt</strong>.</li><br/>	<li>Type the following command, and then press ENTER:<br/><div>cd /d <var>Partition</var>:\Windows\System32</div><br/><strong>Note </strong><var>Partition</var> represents the letter of the partition on which Windows Vista is installed. Typically, this is partition C.</li><br/>	<li>Type the following command, and then press ENTER:<br/><div>bcdedit /enum all</div><br/>In the Windows Boot Loader section of the output from this command, note the GUID that is listed for <strong>resumeobject</strong>. You will use this GUID later.</li><br/>	<li>Type the following command, and then press ENTER:<br/><div>bcdedit -create {bootmgr} -d “<var>Description</var>“</div><br/><strong>Note </strong><var>Description</var> represents the description for the new entry.</li><br/>	<li>Type the following command, and then press ENTER:<br/><div>bcdedit -set {bootmgr} device partition=<var>Partition</var>:</div><br/><strong>Note </strong><var>Partition</var> represents the letter of the partition. Typically, the letter is C.</li><br/>	<li>Type the following command, and then press ENTER:<br/><div>bcdedit /displayorder {<var>GUID</var>}</div><br/><strong>Note </strong><var>GUID</var> represents the GUID that you obtained in step 8.</li><br/>	<li>Type the following command, and then press ENTER:<br/><div>bcdedit /default {<var>GUID</var>}</div><br/><strong>Note </strong><var>GUID</var> represents the GUID that you obtained in step 8.</li><br/>	<li>Type the following command, and then press ENTER:<br/><div>bcdedit /timeout <var>Value</var></div><br/><strong>Note </strong><var>Value</var> represents the time in seconds before the Windows Boot Manager selects the default entry that you created in step 12.</li><br/>	<li>Restart the computer.</li><br/></ol><br/>If you are booting from a Server 2008 install disk, when you use the “Repair your computer” option, the available options look like this:<br/><br/>You can access the repair option on a Server 2008 disk by choosing “command prompt”, then running  “x:\sources\recovery\StartRep.exe”.<br/><br/>I did this and it worked like a champ!  It found an error, corrected it, and the server was back up and running 10 minutes later.<br/><br/>I have also done this on Server 2008 using a Windows Vista install disk.  Slightly risky, but the server was down anyway, and I was in a pinch.  That also worked.  Along the same lines, I would guess that a Windows 7 install disk would work for Server 2008 R2 if you had no other option.  But don’t hold me to that!